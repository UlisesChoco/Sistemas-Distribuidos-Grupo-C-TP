syntax = "proto3";

option java_outer_classname = "UserServiceClass";
option java_package = "com.grupo_c.SistemasDistribuidosTP.service";

message Empty{}

message LoginRequest {
  string username = 1;
  string password = 2;
}

message UserWithTokenDTO {
  UserWithRolesDTO userWithRolesDTO = 1;
  string token = 2;
}

message RoleDTO {
  string name = 1;
}

message UserWithRolesDTO {
  string username = 1;
  string name = 2;
  string surname = 3;
  string phoneNumber = 4;
  string email = 5;
  bool isActive = 6;
  repeated RoleDTO roles = 7;
}

message UserListResponse {
  repeated UserWithRolesDTO users = 1;
}

message Response {
  bool succeeded = 1;
}

message UserSimpleDTO{
  string username = 1;
  string name = 2;
  string surname = 3;
}

message UserRequest {
  string username = 1;
}

service UserService {
  rpc Login(LoginRequest) returns (UserWithTokenDTO);
  rpc CreateUser(UserWithRolesDTO) returns (Response);
  rpc ModifyUser(UserWithRolesDTO) returns (Response);
  rpc DeleteUser(UserRequest) returns (Response);
  rpc GetUserList(Empty) returns (UserListResponse);
  rpc GetUser(UserRequest) returns (UserWithRolesDTO);
}
